<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Educaci√≥n Vial - Video</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .container {
        width: 100%;
        max-width: 800px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: relative;
      }

      .video-container {
        position: relative;
        width: 100%;
        background: #000;
      }

      #videoPlayer {
        width: 100%;
        height: auto;
        display: block;
      }

      .video-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: opacity 0.3s ease;
        opacity: 0;
        visibility: hidden;
      }

      .video-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .play-button {
        background: #667eea;
        color: white;
        border: none;
        font-size: 3rem;
        padding: 20px 30px;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .play-button:hover {
        background: #5a6fd8;
        transform: scale(1.1);
      }

      .progress-bar {
        width: 100%;
        height: 4px;
        background: #e1e5e9;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: #667eea;
        transition: width 0.1s ease;
        width: 0%;
      }

      .share-container {
        padding: 40px;
        display: none;
        opacity: 0;
        visibility: hidden;
        transform: translateY(20px);
        transition: all 0.5s ease;
        text-align: center;
      }

      .share-container.show {
        display: block;
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .share-title {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 2rem;
        font-weight: bold;
      }

      .share-subtitle {
        color: #666;
        font-size: 1.1rem;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .video-link-container {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
        border: 2px solid #e9ecef;
      }

      .video-link-label {
        color: #333;
        font-weight: bold;
        margin-bottom: 10px;
        display: block;
      }

      .video-link-box {
        background: #ffffff;
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #dee2e6;
        font-family: monospace;
        font-size: 0.95rem;
        word-break: break-all;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }

      .copy-btn {
        background: #667eea;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.85rem;
        cursor: pointer;
        transition: background 0.3s ease;
        white-space: nowrap;
      }

      .copy-btn:hover {
        background: #5a6fd8;
      }

      .share-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-bottom: 30px;
      }

      .share-btn {
        padding: 15px 25px;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .whatsapp-btn {
        background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
        color: white;
      }

      .whatsapp-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(37, 211, 102, 0.4);
      }

      .facebook-btn {
        background: linear-gradient(135deg, #1877F2 0%, #166FE5 100%);
        color: white;
      }

      .facebook-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(24, 119, 242, 0.4);
      }

      .location-info {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        text-align: left;
        border: 2px solid #e9ecef;
      }

      .location-info h4 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.2rem;
        text-align: center;
      }

      .location-info p {
        margin-bottom: 8px;
        color: #555;
        line-height: 1.5;
      }

      .location-info strong {
        color: #333;
      }

      #videoPlayer::-webkit-media-controls {
        display: none !important;
      }
      #videoPlayer::-moz-media-controls {
        display: none !important;
      }
      #videoPlayer::-ms-media-controls {
        display: none !important;
      }

      @media (max-width: 768px) {
        .container {
          margin: 10px;
          border-radius: 15px;
        }

        .share-container {
          padding: 20px;
        }

        .share-title {
          font-size: 1.5rem;
        }

        .play-button {
          font-size: 2rem;
          padding: 15px 20px;
        }

        .share-buttons {
          flex-direction: column;
          align-items: center;
        }

        .share-btn {
          width: 100%;
          max-width: 280px;
          justify-content: center;
        }

        .video-link-box {
          flex-direction: column;
          gap: 10px;
          align-items: stretch;
        }

        .copy-btn {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Contenedor del Video -->
      <div class="video-container">
        <video
          id="videoPlayer"
          playsinline
          disablepictureinpicture
          controlslist="nodownload noremoteplayback noplaybackrate nofullscreen"
        >
          <source src="EDUCACI√ìN VIAL.mp4" type="video/mp4" />
          Tu navegador no soporta el elemento video.
        </video>
        <div class="video-overlay show" id="videoOverlay">
          <button class="play-button" id="playButton">‚ñ∂</button>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <!-- Contenedor de Compartir -->
      <div class="share-container" id="shareContainer">
        <h2 class="share-title">¬°Comparte este video educativo!</h2>
        
        <p class="share-subtitle">
          Ay√∫danos a difundir la educaci√≥n vial compartiendo este contenido con tus amigos y familiares.
        </p>

        <div class="video-link-container">
          <label class="video-link-label">Enlace del video:</label>
          <div class="video-link-box">
            <span id="videoLinkText">https://vialidad-mutu12agosto.vercel.app</span>
            <button class="copy-btn" onclick="copyVideoLink()">Copiar</button>
          </div>
        </div>

        <div class="share-buttons">
          <a href="#" id="whatsappBtn" class="share-btn whatsapp-btn" target="_blank">
            üì≤ Compartir en WhatsApp
          </a>
          <a href="#" id="facebookBtn" class="share-btn facebook-btn" target="_blank">
            üëç Compartir en Facebook
          </a>
        </div>

        <div class="location-info">
          <h4>üìç Mutualidad Doce de Agosto</h4>
          <p><strong>Direcci√≥n:</strong><br>
          Calle 23 No. 100-B Entre 18 y 20<br>
          Col. Centro Um√°n, Yucat√°n</p>
          
          <p><strong>üïí Horarios de atenci√≥n:</strong><br>
          Lunes a Mi√©rcoles: 08:00-12:00 y 15:30-19:00<br>
          Jueves y Viernes: 08:00-12:00<br>
          S√°bados: 15:00-18:00</p>
        </div>
      </div>
    </div>

    <script>
      const videoPlayer = document.getElementById("videoPlayer");
      const videoOverlay = document.getElementById("videoOverlay");
      const playButton = document.getElementById("playButton");
      const shareContainer = document.getElementById("shareContainer");
      const progressFill = document.getElementById("progressFill");
      const whatsappBtn = document.getElementById("whatsappBtn");
      const facebookBtn = document.getElementById("facebookBtn");

      let videoEnded = false;
      let isFullscreen = false;

      const videoURL = "https://vialidad-mutu12agosto.vercel.app";
      const shareMessage = "Mira este video educativo sobre vialidad de la Mutualidad 12 de Agosto: ";

      // Configurar enlaces de compartir
      whatsappBtn.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareMessage + videoURL)}`;
      facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(videoURL)}`;

      // Funci√≥n para entrar en pantalla completa
      function enterFullscreen() {
        if (videoPlayer.requestFullscreen) {
          videoPlayer.requestFullscreen();
        } else if (videoPlayer.webkitRequestFullscreen) {
          videoPlayer.webkitRequestFullscreen();
        } else if (videoPlayer.msRequestFullscreen) {
          videoPlayer.msRequestFullscreen();
        }
      }

      // Funci√≥n para salir de pantalla completa
      function exitFullscreen() {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
      }

      // Detectar cambios en el estado de pantalla completa
      function onFullscreenChange() {
        isFullscreen = !!(
          document.fullscreenElement ||
          document.webkitFullscreenElement ||
          document.msFullscreenElement
        );
      }

      // Funci√≥n para copiar el enlace del video
      function copyVideoLink() {
        const text = document.getElementById("videoLinkText").textContent;
        navigator.clipboard
          .writeText(text)
          .then(() => {
            const btn = document.querySelector('.copy-btn');
            const originalText = btn.textContent;
            btn.textContent = '¬°Copiado!';
            btn.style.background = '#27ae60';
            
            setTimeout(() => {
              btn.textContent = originalText;
              btn.style.background = '#667eea';
            }, 2000);
          })
          .catch((err) => {
            console.error("Error al copiar el enlace:", err);
            alert("No se pudo copiar autom√°ticamente. Por favor, selecciona y copia el enlace manualmente.");
          });
      }

      // Configurar eventos del video
      function setupVideoEvents() {
        playButton.addEventListener("click", function () {
          if (videoPlayer.paused) {
            videoPlayer.play();
            videoOverlay.classList.remove("show");
            
            // Entrar en pantalla completa cuando se reproduce el video
            setTimeout(() => {
              enterFullscreen();
            }, 100);
          } else {
            videoPlayer.pause();
            videoOverlay.classList.add("show");
          }
        });

        videoPlayer.addEventListener("pause", function () {
          if (!videoEnded) {
            videoOverlay.classList.add("show");
            playButton.innerHTML = "‚ñ∂";
          }
        });

        videoPlayer.addEventListener("play", function () {
          videoOverlay.classList.remove("show");
          playButton.innerHTML = "‚è∏";
        });

        videoPlayer.addEventListener("timeupdate", function () {
          if (videoPlayer.duration) {
            const progress = (videoPlayer.currentTime / videoPlayer.duration) * 100;
            progressFill.style.width = progress + "%";
          }
        });

        videoPlayer.addEventListener("ended", function () {
          videoEnded = true;
          videoOverlay.classList.remove("show");

          // Salir de pantalla completa cuando el video termine
          if (isFullscreen) {
            exitFullscreen();
          }

          // Mostrar opciones de compartir
          setTimeout(() => {
            shareContainer.style.display = "block";
            setTimeout(() => {
              shareContainer.classList.add("show");
            }, 50);
          }, 500);
        });
      }

      // Configurar eventos de pantalla completa
      function setupFullscreenEvents() {
        document.addEventListener("fullscreenchange", onFullscreenChange);
        document.addEventListener("webkitfullscreenchange", onFullscreenChange);
        document.addEventListener("msfullscreenchange", onFullscreenChange);
      }

      // Funci√≥n para reiniciar la aplicaci√≥n
      function resetApplication() {
        videoPlayer.currentTime = 0;
        videoEnded = false;
        progressFill.style.width = "0%";
        videoOverlay.classList.add("show");
        playButton.innerHTML = "‚ñ∂";

        // Asegurar que se salga de pantalla completa
        if (isFullscreen) {
          exitFullscreen();
        }

        shareContainer.classList.remove("show");
        shareContainer.style.display = "none";
      }

      // Inicializar la aplicaci√≥n
      document.addEventListener("DOMContentLoaded", function () {
        setupVideoEvents();
        setupFullscreenEvents();
        
        // Copiar enlace autom√°ticamente cuando se muestre el contenedor de compartir
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.target === shareContainer && 
                shareContainer.classList.contains('show')) {
              // Copiar enlace autom√°ticamente
              navigator.clipboard.writeText(videoURL).catch(() => {
                console.log("No se pudo copiar autom√°ticamente");
              });
            }
          });
        });
        
        observer.observe(shareContainer, {
          attributes: true,
          attributeFilter: ['class']
        });
      });

      // Event listener para reiniciar con doble clic en el logo/t√≠tulo
      document.querySelector('.share-title').addEventListener('dblclick', resetApplication);
    </script>
  </body>
</html>
